plugins {
  id 'groovy'
}

def userHome = System.getProperty('user.home')
def rootProjectDir = rootProject.projectDir

tasks.register('importDrivers') {
    doFirst {
        delete 'Drivers'
    }
    doLast {
        copy {
            into layout.projectDirectory.dir("Drivers")
            from("${rootProject.projectDir}/lib/build/libs") {
                include "${rootProject.name}*.jar"
            }
        }
    }
    doLast {
        copy {
            into layout.projectDirectory.dir("Drivers")
            from("$userHome/.m2/repository/com/kazurayam/MonkDirectoryScanner/0.1.0") {
                include '**/*.jar'
            }
        }
    }
}

tasks.register("cleanProject", Delete) {
    delete '.cache'
    delete 'bin'
    delete 'Libs'
}

tasks.register("publishDemoToDocs") {
    doFirst {
        delete "$rootProjectDir/docs/demo"
    }
    doLast {
        copy {
            from "build/tmp/testOutput/demo"
            into "$rootProjectDir/docs"
        }
    }
}
